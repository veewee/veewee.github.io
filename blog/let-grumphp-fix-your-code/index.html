<!DOCTYPE html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>Let GrumPHP fix your code!</title><meta name=viewport content="width=device-width, initial-scale=1.0"><link rel=stylesheet href=/css/140b.blog.css><!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]--><link rel=apple-touch-icon-precomposed sizes=144x144 href=/images/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/favicon.ico><link rel=alternate type=application/atom+xml title="Toon Verwerft" href=https://veewee.github.io/atom.xml></head><body class=bs-docs-home><a class=sr-only href=#content>Skip to main content</a><header class="navbar navbar-inverse navbar-fixed-top bs-docs-nav" role=banner><div class=container><div class=navbar-header><button class=navbar-toggle type=button data-toggle=collapse data-target=.bs-navbar-collapse><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a href="/" class=navbar-brand>Toon Verwerft</a></div><nav class="collapse navbar-collapse bs-navbar-collapse" role=navigation><ul class="nav navbar-nav"><li><a href="/">Home</a></li><li><a href=https://twitter.com/toonverwerft>Twitter</a></li><li><a href="https://github.com/veewee/">Github</a></li><li><a href=https://www.linkedin.com/in/toonverwerft>LinkedIn</a></li><li><a href=https://speakerdeck.com/veewee>Talks</a></li></ul></nav></div></header><a name=#content></a><div id=content><div class=container><div class=row><div class="col-xs-12 col-sm-8 col-md-9 left-pane"><div class=post-details><h1>Let GrumPHP fix your code!</h1><div class=pull-right><span class="meta label label-info">07 Jun 2020</span></div><small>Tags: <a href=/tags/grumphp class="label label-primary tag" title="View posts tagged with &quot;grumphp&quot;">grumphp</a></small><div class=post><img src=/images/blog/20200607/eda8.fixer-grumpy-long.png class=post-banner alt=""><p>One of the most requested features is the ability to automatically fix broken code. Since previously we could not do this in a controlled an safe way, we decided that this won't be a GrumPHP feature. <a href=https://github.com/phpro/grumphp/releases/tag/v0.19.0 target=_blank>In the new GrumPHP version</a> (0.19.0), we rewrote the task runner system. Now it is possible to do these kind of code manipulations. Let's see how it works...</p><p align=center><img src=/images/blog/20200607/f60a.fixer.gif width=100%></p><h2>How do I get this madness to work?</h2><p>No worries: Fixing is enabled by default! Currently we added fixers for `phpcs` and `PHP-CS-Fixer`. This list might be extended in the future and you can of course also provide fixers for your own custom tasks!</p><h2>How does GrumPHP knows what to fix?</h2><p>GrumPHP will first run the configured tasks as it always did. When a task fails, we already provided the commandline command to fix the code. This resulted in manual copy/pasting the code, which is a stupid repeatable task. With this new feature, the task can now determine if it can autofix the code by e.g. running the console command it displayed. In a last phase before finishing the task runner, the autofixer process is initialized. It will look for fixable tasks and after asking for your consent, it will run the fix command that is provided from the task. GrumPHP will not add any new files to GIT or won't automatically commit these changes.</p><h2>You are in full control!</h2><p>In previous versions, we only displayed the command line tool that you can use to fix your code. We never wanted GrumPHP to change code during a pre-commit or inside a CI cycle. Therefor, we decided to fix the code but don't stage the changes to git. This way, you can always review the changes that were made before recommiting the code.</p><h2>Don't touch my code!</h2><p>I can imagine that you don't want GrumPHP to touch your code. Luckily, the fixer is configurable: You can choose to completely disable it or you can choose to change the default consent answer.</p><p><figure class=highlight><pre><code class=language-yaml data-lang=yaml><span></span><span class=c1># grumphp.yaml</span>

<span class="l l-Scalar l-Scalar-Plain">grumphp</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">fixer</span><span class="p p-Indicator">:</span>
        <span class="l l-Scalar l-Scalar-Plain">enabled</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
        <span class="l l-Scalar l-Scalar-Plain">fix_by_default</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">false</span></code></pre></figure></p><p><em>Note:</em> The `fix_by_defaut` parameter will also be used in situations where CLI input is not supported. Depending on your CLI, this could be e.g. during pre-commit.</p><p>Enjoy and let me know what you think of it!</p></div><a name=comments></a><div id=disqus_thread></div><script type=text/javascript>var disqus_identifier = '/blog/let-grumphp-fix-your-code/';
        var disqus_title = 'Let GrumPHP fix your code!';
        var disqus_url = 'http://veewee.github.io/blog/let-grumphp-fix-your-code/';

        // trigger disqus-comments.js
        var embed_disqus_comments = true;</script></div></div><div class="col-xs-12 col-sm-4 col-md-3 right-pane"><h1>whois <small>VeeWee</small></h1><div><img src=/images/750d.picture.png class="img-thumbnail img-responsive selfie" alt=Selfie></div><div><h2>Hi there!</h2><p>Glad you made it to my blog. Please feel free to take a look around. You will find some interesting stuff, mostly about web development and PHP.</p><p>Still can't get enough of me? Quick! Take a look at my <a href=https://speakerdeck.com/veewee>Speakerdeck</a>, <a href=https://twitter.com/toonverwerft>Twitter</a> or <a href="https://github.com/veewee/">Github</a> account.</p></div><div class=list-group><a class=list-group-item href=//github.com/veewee/veewee.github.io/issues/new><span class="glyphicon glyphicon-pencil"></span> Contact Me</a> <a class=list-group-item href=/atom.xml><span class="glyphicon glyphicon-pushpin"></span> Subscribe to RSS</a></div></div></div></div></div><script src=/js/b1a7.vendor.js></script><script src=/js/e51f.blog.js></script></body></html>