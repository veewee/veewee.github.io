<!DOCTYPE html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>Run composer tasks in parallel</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/blog.css><!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]--><link rel=apple-touch-icon-precomposed sizes=144x144 href=/images/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/favicon.ico><link rel=alternate type=application/atom+xml title="Toon Verwerft" href=https://veewee.github.io/atom.xml><meta property=og:description content="Composer has a built-in way of running multiple composer scripts by declaring a script alias. This alias runs all specified scripts one by one and fails if one of the scripts fails.  To save you some time, I've written the veewee/composer-run-parallel plugin that can run multiple composer scripts in parallel and won't stop before all tasks have been executed."><meta property=og:title content="Run composer tasks in parallel"><meta property=og:image content=https://veewee.github.io/images/blog/20201202/composer-parallel_thumb.png><meta property=og:image:width content=500><meta property=og:image:height content=375><meta name=twitter:card content=summary_large_image><meta name=twitter:site content=@toonverwerft><meta name=twitter:creator content=@toonverwerft><link rel=me href=https://phpc.social/@veewee></head><body class=bs-docs-home><a class=sr-only href=#content>Skip to main content</a><header class="navbar navbar-inverse navbar-fixed-top bs-docs-nav" role=banner><div class=container><div class=navbar-header><button class=navbar-toggle type=button data-toggle=collapse data-target=.bs-navbar-collapse><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a href=/ class=navbar-brand>Toon Verwerft</a></div><nav class="collapse navbar-collapse bs-navbar-collapse" role=navigation><ul class="nav navbar-nav"><li><a href=/ >Home</a></li><li><a href=https://twitter.com/toonverwerft>Twitter</a></li><li><a href=https://github.com/veewee/ >Github</a></li><li><a href=https://www.linkedin.com/in/toonverwerft>LinkedIn</a></li><li><a href=https://phpc.social/@veewee>PHPC.Social</a></li><li><a href=https://speakerdeck.com/veewee>Talks</a></li></ul></nav></div></header><a name=#content></a><div id=content><div class=container><div class=row><div class="col-xs-12 col-sm-8 col-md-9 left-pane"><div class=post-details><h1>Run composer tasks in parallel</h1><div class=pull-right><span class="meta label label-info">02 Dec 2020</span></div><small>Tags: <span class="label label-primary tag">composer</span> <span class="label label-primary tag">parallel</span></small><div class=post><img src=/images/blog/20201202/composer-parallel-long.png class=post-banner alt=""><p>Composer has a built-in way of running multiple composer scripts by declaring a script alias. This alias runs all specified scripts one by one and fails if one of the scripts fails. To save you some time, I've written the <a href=https://github.com/veewee/composer-run-parallel target=_blank>veewee/composer-run-parallel</a> plugin that can run multiple composer scripts in parallel and won't stop before all tasks have been executed:</p><p><br></p><p align=center><img src=/images/blog/20201202/composer-parallel.gif alt=example width=100%></p><h1 id=why-i-created-this-package>Why I created this package?</h1><p>As the creator of <a href=https://github.com/phpro/grumphp target=_blank>GrumPHP</a>, I am used that <a href=/blog/running-grumphp-tasks-in-parallel/ >all tasks run in parallel</a>. Some of the open-source project that I work on don't have a GrumPHP configuration (yet). Most of those projects run Quality Assurance tools crafted out of composer scripts. Even on those projects, I want to make sure to commit good code before pushing it to a Pull Request. Since I got bored of waiting for the composer scripts to run one by one, I decided to dive into the composer internals in order to make composer scripts run in parallel as well.</p><h1 id=shut-up-and-tell-me-how-to-use-it>Shut up and tell me how to use it!</h1><p>Configuring parallel scripts is like configuring any regular composer script. This package provides a `@parallel` script that takes other composer script aliases as arguments:</p><figure class=highlight><pre><code class=language-json data-lang=json><span class=p>{</span><span class=w>
  </span><span class=nl>"scripts"</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=w>
  
      </span><span class=nl>"ci"</span><span class=p>:</span><span class=w> </span><span class=s2>"@parallel cs tests"</span><span class=p>,</span><span class=w>
  
      </span><span class=nl>"cs"</span><span class=p>:</span><span class=w> </span><span class=s2>"php-cs-fixer fix --dry-run"</span><span class=p>,</span><span class=w>
      </span><span class=nl>"tests"</span><span class=p>:</span><span class=w> </span><span class=s2>"phpunit"</span><span class=w>
  </span><span class=p>}</span><span class=w>
</span><span class=p>}</span></code></pre></figure><p>The code above adds a `ci` composer script to your project, that runs the coding styles and unit tests in parallel. You can run the script like this:</p><figure class=highlight><pre><code class=language-bash data-lang=bash>composer run ci</code></pre></figure><p>Most of the times, you don't want to introduce dependencies to projects you don't own. Therefore, this plugin also provides a `composer parallel` command. You can install this package globally, meaning you can unleash the power of parallel task execution even on packages that don't have this plugin installed:</p><figure class=highlight><pre><code class=language-bash data-lang=bash>composer parallel cs tests</code></pre></figure><h1 id=in-closing>In closing</h1><p>No more waiting! This <a href=https://github.com/veewee/composer-run-parallel target=_blank>veewee/composer-run-parallel</a> plugin can be quickly added to any project and is fun to use. It contains a few more options. Head over to the readme on GitHub to learn more.</p><p>Whilst writing the plugin, I was pleasantly surprised by what is available in the composer codebase by default. Writing the package was a matter of linking the various existing components together. Big-ups to the composer team!</p><p>This plugin comes with one big limitation: Since it is only setting composer as a dependency, it is limited to the `Loop` and `ProcessExecutor` that is provided by composer. To display the result of a script, both the stderr and stdout are printed out to the end user. This could result in non-sequential output if the script you are executing mixes stdout and stderr messages.</p></div><a name=comments></a><div id=disqus_thread></div><script type=text/javascript>var disqus_identifier = '/blog/run-composer-tasks-in-parallel/';
        var disqus_title = 'Run composer tasks in parallel';
        var disqus_url = 'http://veewee.github.io/blog/run-composer-tasks-in-parallel/';

        // trigger disqus-comments.js
        var embed_disqus_comments = true;</script></div></div><div class="col-xs-12 col-sm-4 col-md-3 right-pane"><h1>whois <small>VeeWee</small></h1><div><img src=/images/picture.png class="img-thumbnail img-responsive selfie" alt=Selfie></div><div><h2>Hi there!</h2><p>Glad you made it to my blog. Please feel free to take a look around. You will find some interesting stuff, mostly about web development and PHP.</p><p>Still can't get enough of me? Quick! Take a look at my <a href=https://speakerdeck.com/veewee>Speakerdeck</a>, <a href=https://twitter.com/toonverwerft>Twitter</a>, <a rel=me href=https://phpc.social/@veewee>PHPC.Social</a>, or <a href=https://github.com/veewee/ >Github</a> account.</p></div><div class=list-group><a class=list-group-item href=//github.com/veewee/veewee.github.io/issues/new><span class="glyphicon glyphicon-pencil"></span> Contact Me </a><a class=list-group-item href=/atom.xml><span class="glyphicon glyphicon-pushpin"></span> Subscribe to RSS</a></div></div></div></div></div><script src=/js/vendor.js></script><script src=/js/blog.js></script></body></html>